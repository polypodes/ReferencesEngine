{% extends "ApplicationRefactorReferenceBundle::layout.html.twig" %}

{% block project_active %}class="active"{% endblock %}

{% block body %}
<section class="book-list container">
    <header class="page-header row">
        <h1 class="page-title col-md-3">{{ 'project.List'|trans }}</h1>

		<form action="" method="get" class="search-form form-inline col-md-9">
			<label class="sr-only" for="search">{{ 'project.Search'|trans }}</label>
			<input type="text" class="form-control col-md-3" id="search-field" name="search" placeholder="{{ 'project.Search'|trans }}">
			<button type="submit" class="sub btn btn-default" id="search-submit">{{ 'Search'|trans }}</button>

			<div class="btn-group">
			  	<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
				    <span class="caret"></span>
				    <span class="sr-only">Toggle Dropdown</span>
			  	</button>
			  	<ul class="dropdown-menu" role="menu">
				    <li style="margin-left=5px;">{{ 'Sort'|trans }}</li>
				    <li class="divider"></li>
				    <li><a href="{{ path('refactor_projects', {'sort': 'asc'}) }}">{{ 'Ascending'|trans }}</a></li>
				    <li><a href="{{ path('refactor_projects', {'sort': 'desc'}) }}">{{ 'Descending'|trans }}</a></li>
				    <li class="divider"></li>
				    <li><a href="{{ path('refactor_projects', {'sort' : 'recent'}) }}">{{ 'Recent'|trans }}</a></li>
				    <li><a href="{{ path('refactor_projects', {'sort': 'old'}) }}">{{ 'Old'|trans }}</a></li>
			  	</ul>
			</div>
		</form>


    </header>

	<form name="add_book" action="{{ path('refactor_add_books') }}" method="post" class="row form-inline">
		<div class="row well text-right">
			<select name="book_id" class="form-control" width="20">
				<option value="0">{{'book.New'|trans}}</option>
		  		{% for book in books %}
			    <option value="{{book.id}}">{{ book.title }}</option>
			    {% endfor %}
		  	</select>
			<button type="submit" class="btn btn-primary disabled addBook">
				{{ 'book.Create'|trans }}
				<span class="numberProject">0</span>
			</button>
		</div>

		<article id="new-elem" class="col-md-4 text-center">
	  		<a href="{{ path('refactor_add_projects') }}" class="thumbnail">
				<button type="button" class="btn btn-primary btn-lg">{{ 'project.New'|trans }}</button>
			</a>
		</article>
		{% for project in projects %}
	  	<article class="list-elem col-md-4 text-center project" data-search="{{project.title|lower}} {{project.title2|lower}} {{project.date|date('Y')}} {{project.tags|join(' ')|lower}}">
	  		<input type="checkbox" name="projects[]" value="{{project.id}}" class="checkbox hidden">

			<div class="thumbnail">
	    		<figure>
	    			<a href="{{ path('refactor_show_projects', {'id': project.id}) }}">
	    				{% media project.image, 'thumbnail' %}
	    			</a>
	    			<figcaption>

	    			</figcaption>
	    		</figure>

		    	<div class="project-details thumbnail col-md-12">
		    		<h1><a href="{{ path('refactor_show_projects', {'id': project.id}) }}">{{project.title}}</a></h1>
					<h2>{{project.title2}}</h2>
					<p>
						<a href="#" class="btn btn-primary btn-lg btn-block selector addToBook" role="button">
			    			<span class="glyphicon glyphicon-plus"></span>
			    			<span class="glyphicon-class">{{ 'book.Add'|trans }}</span>
			  			</a>
					</p>
		      		<p>
		    			<a href="{{ path('refactor_edit_projects', {'id': project.id}) }}" class="btn btn-warning col-md-4 btn-sm " role="button">
		        			<span class="glyphicon glyphicon-edit"></span>
		        			<span class="glyphicon-class">{{ 'Edit'|trans }}</span>
		      			</a>
		      			<div class="col-md-4"> </div>

			        	<a class="label-danger btn btn-remove col-md-4 btn-sm" role="button" data-url="{{ path('refactor_remove_projects', {'id': project.id}) }}" data-id = "{{project.id}}" data-title="{{project.title}}">
			        		<span class="glyphicon glyphicon-remove"></span>
			        		<span class="glyphicon-class" data-layout="center" data-type="confirm">{{ 'Delete'|trans }}</span>
			        	</a>
		       		</p>
		       	</div>
		    </div>
		</article>
		{% endfor %}
	</form>
</section>
{% endblock %}
